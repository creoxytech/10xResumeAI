<!DOCTYPE html>
<html>
<head><title>PDF Test</title></head>
<body>
<h2>pdfmake getDataUrl test</h2>
<div id="status">Loading pdfmake...</div>
<div id="preview" style="width:100%;height:80vh;"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/vfs_fonts.min.js"></script>
<script>
  document.getElementById('status').textContent = 'Generating PDF...';
  
  var docDef = {
    pageSize: 'A4',
    content: [
      { text: 'John Doe', fontSize: 22, bold: true, alignment: 'center' },
      { text: 'Software Engineer', fontSize: 12, color: '#666', alignment: 'center', margin: [0, 5, 0, 15] },
      { text: 'EXPERIENCE', fontSize: 14, bold: true, color: '#4338ca', margin: [0, 10, 0, 5] },
      { text: '- Built scalable web apps serving 10M+ users', fontSize: 10, margin: [10, 2, 0, 2] },
      { text: '- Led team of 4 engineers', fontSize: 10, margin: [10, 2, 0, 2] },
    ]
  };

  try {
    pdfMake.createPdf(docDef).getDataUrl(function(dataUrl) {
      document.getElementById('status').textContent = 'PDF generated! Data URL length: ' + dataUrl.length;
      
      // Try embed
      var embed = document.createElement('embed');
      embed.src = dataUrl;
      embed.type = 'application/pdf';
      embed.style.width = '100%';
      embed.style.height = '100%';
      document.getElementById('preview').appendChild(embed);
    });
  } catch(e) {
    document.getElementById('status').textContent = 'ERROR: ' + e.message;
  }
</script>
</body>
</html>
